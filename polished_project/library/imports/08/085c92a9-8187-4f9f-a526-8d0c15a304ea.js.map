{"version":3,"sources":["..\\..\\..\\..\\assets\\scripts/assets\\scripts\\AnimLayerTool.js"],"names":["GameConfig","require","GameTools","AnimLayerTool","moveButtonAnimTime","bottonAnim","button","arrayNode","Array","length","undefined","i","time","cc","random0To1","width","height","anim1","jumpBy","p","anim2","anim3","scaleBy","anim4","delayTime","actions","sequence","reverse","runAction","repeatForever","createShowMessageBox","x","y","name","rotation","parentNode","messageBack","Node","addComponent","Sprite","spriteFrame","love2048FrameCache","getSpriteFrame","setPosition","opacity","addChild","message","indexOf","lableNode","lable","Label","string","fontSize","overflow","Overflow","CLAMP","enableWrapText","horizontalAlign","HorizontalAlign","CENTER","verticalAlign","VerticalAlign","action1","fadeIn","action2","action3","fadeOut","moveFinish","callFunc","callFuncAddScore","action4","sender","node","destroy","createPopStarAnim","from","dTime","moveFinish2","callFuncPopStarAnim","emitterNode","getPosition","move_emitter","ParticleSystem","texture","number","startColor","color","startColorVar","endColorVar","endColor","autoRemoveOnFinish","duration","emissionRate","life","lifeVar","angle","angleVar","custom","playOnLoad","getParent","active","module","exports"],"mappings":"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","file":"AnimLayerTool.js","sourceRoot":"..\\..\\..\\..\\assets\\scripts","sourcesContent":["var GameConfig = require(\"GameConfig\");\nvar GameTools = require(\"GameTools\");\nvar AnimLayerTool = {\n    moveButtonAnimTime: 0.3,// 按钮动画移动时间\n    bottonAnim: function (button) {// 创建按钮特效\n        let arrayNode = new Array();\n        if (button.length == undefined) {\n            arrayNode[0] = button;\n        } else {\n            arrayNode = button;\n        }\n        for (let i = 0; i < arrayNode.length; i++) {\n            let time = cc.random0To1() * 5 + 1;\n            let width = arrayNode[i].height / 20.0;\n            let anim1 = cc.jumpBy(time, cc.p(width, 0), width, 1);\n            let anim2 = cc.jumpBy(time, cc.p(-width, 0), -width, 1);\n            let anim3 = cc.scaleBy(0.3, 1.1, 0.9);\n            let anim4 = cc.delayTime(time);\n            let actions = cc.sequence(anim1, anim2, anim3, anim3.reverse(), anim4);\n            arrayNode[i].runAction(actions.repeatForever());\n        }\n    },\n    createShowMessageBox(x, y, name, rotation, parentNode) {\n        let messageBack = new cc.Node();\n        messageBack.addComponent(cc.Sprite).spriteFrame = GameTools.love2048FrameCache.getSpriteFrame(\"messageBox0\");\n        messageBack.setPosition(x, y);\n        messageBack.rotation = rotation;\n        messageBack.opacity = 0;\n        parentNode.addChild(messageBack);\n        let message = new cc.Node();\n        message.setPosition(0, 30);\n        if (name.indexOf(\"messageBox\") != -1) {\n            message.addComponent(cc.Sprite).spriteFrame = GameTools.love2048FrameCache.getSpriteFrame(name);\n        } else {\n            let lableNode = new cc.Node();\n            let lable = lableNode.addComponent(cc.Label);\n            lable.string = name;\n            lable.fontSize = 30;\n            lable.overflow = cc.Label.Overflow.CLAMP;\n            lable.enableWrapText = true;\n            lable.horizontalAlign = cc.Label.HorizontalAlign.CENTER;\n            lable.verticalAlign = cc.Label.VerticalAlign.CENTER;\n            lableNode.width = 220;\n            lableNode.height = 300;\n            message.addChild(lableNode);\n        }\n        messageBack.addChild(message);\n        let action1 = cc.fadeIn(0.2);\n        let action2 = cc.delayTime(1);\n        let action3 = cc.fadeOut(0.2);\n        let moveFinish = cc.callFunc(this.callFuncAddScore, this, messageBack);\n        let action4 = cc.sequence(action1, action2, action3, moveFinish);\n        messageBack.runAction(action4);\n    },\n\n    callFuncAddScore(sender, node) //创建加分动画监听\n    {\n        sender.destroy();\n    },\n\n    createPopStarAnim(from, dTime) //创建卡片爆炸特效\n    {\n        let moveFinish2 = cc.callFunc(this.callFuncPopStarAnim, this, from);\n        from.runAction(cc.sequence(cc.delayTime(dTime), moveFinish2, cc.fadeOut()));\n    },\n    callFuncPopStarAnim(sender, from) //卡片爆炸特效监听\n    {\n        // GameTools.playSimpleAudioEngine(0);\n        let emitterNode = new cc.Node();\n        emitterNode.setPosition(from.getPosition());\n        let move_emitter = emitterNode.addComponent(cc.ParticleSystem);\n        move_emitter.texture = \"res/raw-assets/resources/stars.png\";\n        switch (from.number) {\n            case 0:\n                move_emitter.startColor = cc.color(255,226,0);\n                break;\n            case 1:\n                move_emitter.startColor = cc.color(235,110,165);\n                break;\n            default:\n                move_emitter.startColor = cc.color(253, 44, 129);\n                break;\n        }\n        move_emitter.startColorVar = cc.color(0, 0, 0, 0);\n        move_emitter.endColorVar = cc.color(0, 0, 0, 0);\n        move_emitter.endColor = move_emitter.startColor;\n        move_emitter.autoRemoveOnFinish = true;\n\n        move_emitter.duration = 0.1;\n        move_emitter.emissionRate = 200;\n        move_emitter.life = 2;\n        move_emitter.lifeVar = 0.5;\n        move_emitter.angle = 90;\n        move_emitter.angleVar = 360;\n        move_emitter.custom = true;\n        move_emitter.playOnLoad = true;\n        from.getParent().addChild(emitterNode);\n        from.active = false;\n    },\n};\n\nmodule.exports = AnimLayerTool;"]}